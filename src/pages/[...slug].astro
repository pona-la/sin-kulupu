---
import "selo-components/common.css"; // has to be above site-specific css

import PrevNext from "@/components/PrevNext.astro";
import "@/global.css";
import { posts, prevnexts } from "@/utils/content";
import { type CollectionEntry, render } from "astro:content";
import { Layout } from "selo-components";

export const getStaticPaths = async () =>
  posts.map((post) => ({
    params: { slug: post.id },
    props: post,
  }));

const post: CollectionEntry<"content"> = Astro.props;
const prevnext = prevnexts[post.id];
const { Content } = await render(post);
---

<Layout
  useNavbar
  useRss
  title={post.data.title}
  description={post.data.description}
  date={post.data.date}
  goatcounter="sin-kulupu-pona-la.goatcounter.com"
  github="https://github.com/pona-la/sin-kulupu"
>
  {prevnext && <PrevNext prevnext={prevnext} slot="pagenav" />}
  <Content />
</Layout>
